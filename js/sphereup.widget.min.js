var SU_MINIFY=!0;(function(){function p(i){if(t.isIFrameMode){var r="tap";if(t.isIE&&(r="click"),n("body").height()==0&&(r+=", mousedown"),i)n(document).on(r,nt);else n(document).off(r,nt)}}function nt(t){u("onDocumentClick",r.DEBUG);var i=document.elementFromPoint(t.clientX,t.clientY);i!=n("#iframe_container")[0]?(c(!1),f!=null&&f.postMessage("parentMinimizeWidget"),n("#iframe_container").hasClass("enlarged")&&f.postMessage("parentCloseSiteSearch")):u("skip minimize",r.DEBUG)}function c(t){t?n("#su_host_overlay").show():n("#su_host_overlay").hide()}function u(n,t){typeof t=="undefined"&&(t=r.WARNING);typeof console!="undefined"&&window.console!==null&&t>=rt&&console.log(n)}function ut(){var r=navigator.appName,t=navigator.userAgent,i,n=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return n&&(i=t.match(/version\/([\.\d]+)/i))!=null&&(n[2]=i[1]),n=n?[n[1],n[2]]:[r,navigator.appVersion,"-?"],n[0].toLowerCase()}function tt(){var t;if(ut()=="msie")return t=parseInt(w(),10),t>=7?"11.0":t>=6?"10.0":t>=5?"9.0":t>=4?"8.0":"7.0";var u=navigator.appName,i=navigator.userAgent,r,n=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return n&&(r=i.match(/version\/([\.\d]+)/i))!=null&&(n[2]=r[1]),n=n?[n[1],n[2]]:[u,navigator.appVersion,"-?"],n[1]}function w(){var t=navigator.userAgent,n=t.match(/(Trident\/)([\d.]+)(?=;|\))/i);return n?n[2]:null}function ft(){var n=document.body,t,i,r,u,f;return document.createElement&&n&&n.appendChild&&n.removeChild?(t=document.createElement("div"),!t.getBoundingClientRect)?null:(t.innerHTML="x",t.style.cssText="position:fixed;top:100px;",n.appendChild(t),i=n.style.height,r=n.scrollTop,n.style.height="3000px",n.scrollTop=500,u=t.getBoundingClientRect().top,n.style.height=i,f=u===100,n.removeChild(t),n.scrollTop=r,f):null}function et(n,t,i){var s=document.getElementsByTagName("head")[0],r=document.createElement("link"),u,f,e,o;return r.setAttribute("href",n),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),"sheet"in r?(u="sheet",f="cssRules"):(u="styleSheet",f="rules"),e=setInterval(function(){try{r[u]&&r[u][f].length&&(clearInterval(e),clearTimeout(o),t.call(i||window,!0,r))}catch(n){}},10),o=setTimeout(function(){clearInterval(e);clearTimeout(o)},15e3),s.appendChild(r),r}function ot(){return navigator.userAgent.indexOf("Firefox")!=-1&&parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf("Firefox")+8))>=3.6?!1:navigator.userAgent.indexOf("Chrome")!=-1&&parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf("Chrome")+7).split(" ")[0])<15||navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Version")!=-1&&parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf("Version")+8).split(" ")[0])>=5||navigator.userAgent.indexOf("Android")!=-1&&navigator.userAgent.indexOf("Chrome")!=-1?!0:!1}function b(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+n+"=([^&#]*)",r=new RegExp(i,"i"),t=r.exec(window.location.search);return t==null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function st(n){var t=document.createElement("a");return t.href=n,t.hostname}function ht(){location.protocol.indexOf("https")>=0&&(o=o.replace("http:","https:"))}function ct(){var u=!1,n=document.createElement("div"),i,r;return n.id="su_hcm_tester",n.style.borderWidth="1px",n.style.borderStyle="solid",n.style.borderTopColor="red",n.style.borderRightColor="green",n.style.position="absolute",n.style.top="-999px",document.body.appendChild(n),i=document.defaultView?document.defaultView.getComputedStyle(n,null):n.currentStyle?n.currentStyle:null,i&&(r=i.backgroundImage,u=i.borderTopColor==i.borderRightColor||r!=null&&(r=="none"||r=="url(invalid-url:)"),t.isIE?n.outerHTML="":document.body.removeChild(document.getElementById("su_hcm_tester"))),u}var h;window.SphereUp||(window.SphereUp={});SphereUp.SphereUpWidget||(SphereUp.SphereUpWidget={});var e="2.0",n,o="http://suwidget3-ss.sphereup.com/",it=st(o),a="";SU_MINIFY&&(a=".min");var t={},k=null,f=null,r={DEBUG:1,INFO:2,WARNING:3,ERROR:4},rt=r.WARNING,i={},d=!1,v=!1,y="",l=0,g=!1,s=!1;SphereUp.SphereUpWidget.defaultOptions={clientId:"Default",IsHidden:!1,isIFrameMode:!0,isDocumentQuirksMode:!1,widgetVersion:"3.0.10.5",InitialWidth:204,Alignment:"",IsTooltipVisible:!1,Position:"",Design_Mode:!1,ShowEntranceAnimation:!1,IsInHighContrastMode:!1,IsCustomHtmlUsed:!1,LightBox:!1,CustomHtmlDimensions:{loadingWidth:0,loadingHeight:0,initialWidth:0,initialHeight:0},WidgetStartLoadTime:0};SphereUp.SphereUpWidget.events={loading:null,opened:null,resultsShown:null,noResultsShown:null,resultExpanded:null,externalContentShown:null,closed:null,resultCollapsed:null};h={zoom:-1,width:-1};SphereUp.SphereUpWidget.isSupported=function(){if(navigator.userAgent.indexOf("MSIE")!=-1){var n=parseInt(w(),10);if(isNaN(n)||n<4)return!1}return!0};SphereUp.SphereUpWidget.Open=function(){f!=null&&(t.isIE&&p(!1),f.postMessage("hoverInWidget"),t.isIE&&setTimeout(function(){p(!0)},1e3))};SphereUp.SphereUpWidget.Close=function(){f!=null&&f.postMessage("parentMinimizeWidget")};SphereUp.SphereUpWidget.Search=function(n){typeof n!="undefined"&&n.trim().length>0&&f.postMessage("search:"+n.trim())};SphereUp.SphereUpWidget.unloadWidget=function(t){n!=null&&typeof n!="undefined"&&n("#iframe_container").length>0?(f!=null&&f.postMessage("parentMinimizeWidget"),l=0,n("#iframe_container").remove(),s=!1,n.isFunction(t)&&t()):s?setTimeout(function(){SphereUp.SphereUpWidget.unloadWidget(t)},200):l=0};SphereUp.SphereUpWidget.loadWidget=function(nt){function yt(){var f,i,e;if(t=n.extend({},SphereUp.SphereUpWidget.defaultOptions,nt),f=tt(),i=parseInt(document.documentMode,10),t.isIE=st()=="msie",t.Is98=t.isIE&&f==9&&i<=8,t.IsIE7=t.isIE&&(i<=7||typeof document.documentMode=="undefined"),t.IsIE8=t.isIE&&(i<=8||typeof document.documentMode=="undefined"),t.IsIE9=t.isIE&&f==9,v=t.Design_Mode,t.isIE&&(e=parseInt(w(),10),isNaN(e)||e<4)){u("Device or browser is not supported",r.ERROR);return}fi()}function pt(){u("jquery loaded",r.DEBUG);typeof nt.container=="undefined"&&(t.container="body");n(document.body).ready(function(){SphereUp.SphereUpWidget.defaultOptions.IsInHighContrastMode=ct();n("#"+nt.container).is("div")?t.container="#"+t.container:n(nt.container).length!=1&&(t.container="body");wt()})}function wt(){u("userOptions.Version="+t.Version,r.INFO);var i="";t.Version=="1.0"?i=n('<div id="su_w_s_widget"><div id="su_w_s_loading"><div id="su_w_s_loading_btn"><\/div><div id="su_w_s_loading_text"><div id="su_w_s_loading_content"><\/div><\/div><\/div><\/div>'):t.Version=="2.0"||t.Version=="2.5"?i=n('<div id="su_w_s_widget"><div id="su_w_s_loading"><div id="su_w_s_loading_content"><\/div><\/div><\/div>'):(t.Version=="3.0"||t.Version=="3.5")&&(i=t.IsCustomHtmlUsed==!1?n('<div id="su_w_s_widget"><div id="su_w_s_loader" class="su_w_s_wrapper"><div class="su_w_s_loader_image"><\/div><\/div><\/div>'):n('<div id="su_w_s_widget" role="search">'+unescape(t.htmlLoading)+"<\/div>"));t.isIFrameMode==!1&&n(i).attr("style",t.Position);n(i).addClass("su_w_s_"+t.Language);n(i).addClass("su_w_"+t.Alignment+"_align");n(i).addClass("su_w_t_"+t.Alignment);n(i).addClass("su_"+t.ColorScheme+"_t");t.Style&&t.Style.length>0&&n(i).addClass("su_style_"+t.Style);SphereUp.SphereUpWidget.defaultOptions.IsInHighContrastMode&&n(i).addClass("su_w_s_hc_mode");v=t.Design_Mode;v?(t.isIFrameMode=!1,ut(o+"widget-scripts/sphereup.widget.script"+e+a+".js?ver="+t.widgetVersion,"widget",ui)):bt(i)}function bt(o){var s,a,h,v;i.initialWidthNoTooltip=74;i.initialWidthTooltip=259;i.initialHeight=90;i.openedWidth=319;i.fullOpenHeight=485;i.initialWidthTooltip=280;i.loadingHeight=74;i.V2_initialWidth=t.InitialWidth+15;i.V2_WidthHovered=311;i.V2_HeightHovered=170;i.V3_initialHeight=43;i.V3_initialWidth=108;i.V3_HoverInWidth=313;i.V3_HoverInHeight=184;i.V3_ExpandWidth=478;i.V3_ExpandHeight=573;initialHeight=i.loadingHeight;t.SiteSearch&&(i.fullOpenHeight=515,i.enlargeStartFlipWidth=742,i.enlargeStartFlipHeight=800,i.enlargeEndFlipWidth=742,i.enlargeEndFlipHeight=564);t.isIE&&tt()<10&&document.documentMode<=8&&(u("IE Quirks mode detected.",r.INFO),t.isDocumentQuirksMode=!0);t.isIFrameMode=!0;window.location.href.indexOf("?")>=0&&(y="&"+window.location.href.slice(window.location.href.indexOf("?")+1));t.SiteSearch&&(y+="&SiteSearch=1");s=t.IsTooltipVisible?i.initialWidthTooltip:i.initialWidthNoTooltip;(e=="2.0"||e=="2.5")&&(s=i.V2_initialWidth,i.initialHeight=66,typeof t.ColorScheme!="undefined"&&t.ColorScheme=="clean"&&(i.initialHeight=55),initialHeight=i.initialHeight);parseFloat(e)>=3&&(i.loadingHeight=52,s=i.V3_initialWidth,initialHeight=i.loadingHeight);a="absolute";ft()?a="fixed":t.Position.indexOf("fixed")>=0&&(d=!0);h=n('<div id="iframe_container" class="su_w_s_hidden" title="SphereUp Smart Search & Connect" style="filter:chromacolor=#F5FAFD; width:'+s+"px; height:"+initialHeight+"px; position:"+a+'; z-index:99999; overflow:hidden; scroll:noscroll;"><\/div>');t.IsIE8||t.isDocumentQuirksMode?n(h).addClass("su_ie8"):t.IsIE9&&n(h).addClass("su_ie9");n(t.container).append(h);l++;lt();n("#iframe_container").attr("style",n("#iframe_container").attr("style")+";"+t.Position);parseFloat(e)<3&&(n("#iframe_container").css("top",parseInt(n("#iframe_container").css("top"))-10),n("#iframe_container").css("margin-"+t.Alignment,parseInt(n("#iframe_container").css("margin-"+t.Alignment))-10));parseFloat(e)>=3&&(n("#iframe_container").prepend(n('<a id="sup_focus_trapper" href="#" style="position:absolute;top:-5000px;opacity:0;">Open Search<\/a>')),n("#sup_focus_trapper").bind("focus",function(t){f!=null&&(u("sup_focus_trapper focus",r.DEBUG),t.preventDefault(),n("#sup_focus_trapper").attr("tabindex",-1),n("#su_w_last_element").attr("tabindex",""),f.postMessage("hoverInWidget"))}),n("#iframe_container").append(n('<a id="su_w_last_element" href="#" style="position:absolute;top:-5000px;opacity:0;">Close Search<\/a>')),n("#su_w_last_element").bind("focus",function(t){c(!1);f!=null&&(u("su_w_last_element focus",r.DEBUG),t.preventDefault(),n("#su_w_last_element").attr("tabindex",-1),n("#sup_focus_trapper").attr("tabindex",""),f.postMessage("parentMinimizeWidget"))}),typeof n("#iframe_container").data("marginLeft-origin")=="undefined"&&n("#iframe_container").data("marginLeft-origin",n("#iframe_container").css("margin-left").replace("px","")),typeof n("#iframe_container").data("marginRight-origin")=="undefined"&&n("#iframe_container").data("marginRight-origin",n("#iframe_container").css("margin-right").replace("px","")),typeof n("#iframe_container").data("marginTop-origin")=="undefined"&&typeof n("#iframe_container").css("margin-top")!="undefined"&&n("#iframe_container").data("marginTop-origin",n("#iframe_container").css("margin-top").replace("px","")));g&&n(o).prop("class","su_w_s_ver"+e.substring(0,1)+" "+n(o).prop("class"));t.ShowEntranceAnimation&&(t.Version=="2.0"||t.Version=="")?(n("#iframe_container").hide(),n("#iframe_container").append(o),v=n("#iframe_container").css("top"),n("#iframe_container").css("top",-65),n("#iframe_container").show(),n("#iframe_container").animate({top:v},{duration:1e3})):n("#iframe_container").prepend(o);t.CustomHtmlDimensions.initialWidth=n(o).width();t.CustomHtmlDimensions.initialHeight=n(o).height()+4;t.IsCustomHtmlUsed&&(n("#iframe_container").width(t.CustomHtmlDimensions.initialWidth),n("#iframe_container").height(t.CustomHtmlDimensions.initialHeight),n("#su_w_s_widget").addClass("su_w_s_custom_cta"));t.Version=="3.5"&&(n("body").append('<button id="su_w_s_floatingCTA" style="position:fixed;bottom:16px;right:16px;display:none;z-index:'+(parseInt(n("#iframe_container").css("z-index"),10)-2)+'">Click Me<\/button>'),n("#su_w_s_floatingCTA").click(function(n){u("su_w_s_floatingCTA click",r.DEBUG);n.preventDefault();SphereUp.SphereUpWidget.Open()}));ni();parseFloat(e)>=3&&kt()}function kt(){if(!t.isIE||document.documentMode>=7){setTimeout(function(){n(window).trigger("resize")},3e3);n(window).on("resize load",function(){var t=dt(),n=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-10;n!=h.width&&rt(-1,-1,200);(n!=h.width||t!=h.zoom)&&(h.width=n,h.zoom=t,f!=null&&f.postMessage("zoom:"+t+"^"+n))})}}function dt(){var t=st(),n={},i;return n.zoom=1,n.zoomf=n.zoom,n.width=window.screen.width,n.height=window.screen.height,t=="firefox"?n.zoom=gt():t=="chrome"||t=="safari"?n.zoom=(window.outerWidth-8)/window.innerWidth:t=="msie"&&(i=document.frames.screen,n.zoom=(i.deviceXDPI/i.systemXDPI*100+.9).toFixed()/100),n.zoom.toFixed(2)*100}function gt(){for(var f=function(n,t,i){for(var r=window.matchMedia;n>=t&&!r("(min-resolution: "+n/i+"dppx)").matches;)n--;return n},i=5,r=.1,t=1,n,u=0;u<5;u++)n=10*f(i,r,t),i=n+9,r=n,t*=10;return n/t}function st(){var r=navigator.appName,t=navigator.userAgent,i,n=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return n&&(i=t.match(/version\/([\.\d]+)/i))!=null&&(n[2]=i[1]),n=n?[n[1],n[2]]:[r,navigator.appVersion,"-?"],n[0].toLowerCase()}function ni(){n(document).ready(function(){k=n("#iframe_container").position().top;d&&n(window).scroll(function(){n("#iframe_container").css("top",n(window).scrollTop()+k)});p(!0)})}function ti(t){var u=t.split(","),r=parseInt(u[1]),i=parseInt(u[2]),f=n("#iframe_container").attr("style").indexOf("top")>=0?"margin-top":"margin-bottom",e=n("#iframe_container").attr("style").indexOf("left")>=0?"margin-left":"margin-right";n("#iframe_container").offset().left+r<=0&&(r=-n("#iframe_container").offset().left);n("#iframe_container").offset().left+r+n("#iframe_container").width()>=n(window).width()&&(r=n(window).width()-n("#iframe_container").offset().left-n("#iframe_container").width());n("#iframe_container").offset().top+i<=0&&(i=-n("#iframe_container").offset().top);n("#iframe_container").offset().top+i+n("#iframe_container").height()>=n(window).height()&&(i=n(window).height()-n("#iframe_container").offset().top-n("#iframe_container").height());n("#iframe_container").offset().top+i<=0&&(i=0);n("#iframe_container").css(f,"+="+i+"px");n("#iframe_container").css(e,"+="+r+"px")}function ii(n){var t=n.split(","),i=220,r,u;t[0]=="SetSize"&&(i=parseInt(t[1]));r=parseInt(t[2]);u=parseInt(t[3]);rt(i,r+5,u)}function lt(){if(l==2){setTimeout(function(){n("#su_w_s_widget").remove()},3e4);var h=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-10;f=new easyXDM.Socket({remote:o+"content/"+e+"/widgetholder"+a+".htm?clientId="+t.clientId+"&ver="+t.widgetVersion+y+"&isQuirk="+t.isDocumentQuirksMode+"&Is98="+t.Is98+"&baseDomain="+it+"&maxWidth="+h,container:document.getElementById("iframe_container"),onMessage:function(o,h){var a,l,w,k,d,g,y,p,v;if(u("parent message:'"+o+"' from: '"+h+"'",r.DEBUG),o.indexOf("moveIframe")>=0){ti(o);return}if(o.indexOf("SetSize")>=0||o.indexOf("SetInitialSize")>=0){ii(o);return}if(a=o,l="",o.indexOf(",")>0)a=o.substring(0,o.indexOf(",")),l=o.substring(o.indexOf(",")+1),typeof window[a]=="function"?l.indexOf(",")>0?(w=l.substring(0,l.indexOf(",")),k=l.substring(l.indexOf(",")+1),window[a](w,k)):window[a](l):window.open("mailto:"+l,"_self");else if(o.indexOf("event")==0)try{d=JSON.parse(o.substring(5));at(d)}catch(nt){}else switch(a){case"startEnlarge":n("#iframe_container").addClass("enlarged");rt(i.enlargeStartFlipWidth,i.enlargeStartFlipHeight);break;case"endEnlarge":n("#iframe_container").addClass("enlarged");rt(i.enlargeEndFlipWidth,i.enlargeEndFlipHeight);break;case"ensmall":rt(i.openedWidth,i.fullOpenHeight);n("#iframe_container").removeClass("enlarged");break;case"destroyLoading":if(g=(new Date).getTime()-SphereUp.SphereUpWidget.defaultOptions.WidgetStartLoadTime,n("#iframe_container.su_w_s_hidden").removeClass("su_w_s_hidden"),n("#su_w_s_widget").remove(),t.LightBox){if(y=Math.max(ri(),9999),t.IsIE8||t.isDocumentQuirksMode){p="position: absolute; width:1px; height:1px; overflow:hidden;";setTimeout(function(){vt()},500);n(window).on("resize",function(){vt()})}else p="position: fixed; width:100%; height:100%;";n("#iframe_container").before('<div id="su_host_overlay" style="'+p+" display:none; top:0px; left:0px; opacity:0.5; filter:alpha(opacity=50); background-color:black; z-index:"+(y+1)+'"><\/div>');n("#iframe_container").css("z-index",y+2)}parseFloat(e)>=3&&(f.postMessage("setTitle^"+document.title+"^"+g+"^"+t.widgetVersion),n("#su_w_s_floatingCTA").show());v=b("supq");typeof v!="undefined"&&v.length>0&&f.postMessage("search:"+v);s=!1;break;case"iframeShowInitialStateHoverIn":t.IsTooltipVisible?rt(i.initialWidthTooltip,i.initialHeight):rt(i.initialWidthNoTooltip,i.initialHeight);break;case"iframeShowInitialStateHoverOut":rt(i.initialWidthNoTooltip,i.initialHeight);typeof n("#iframe_container").data("marginLeft-origin")!="undefined"&&n("#iframe_container").css("margin-left",parseInt(n("#iframe_container").data("marginLeft-origin"),10));break;case"iframeShowInitialState":rt(i.initialWidthTooltip,i.initialHeight);typeof n("#iframe_container").data("marginLeft-origin")!="undefined"&&n("#iframe_container").css("margin-left",parseInt(n("#iframe_container").data("marginLeft-origin"),10));break;case"iframeShowSearchContainer":rt(i.openedWidth,i.initialHeight);break;case"iframeGenerateSearchResult":rt(i.openedWidth,i.fullOpenHeight);typeof OnOpen!="undefined"&&OnOpen();break;case"hoverInInitialSearch":rt(i.V2_WidthHovered,i.V2_HeightHovered);break;case"hoverOutInitialSearch":rt(i.V2_initialWidth,i.initialHeight);typeof n("#iframe_container").data("marginLeft-origin")!="undefined"&&n("#iframe_container").css("margin-left",parseInt(n("#iframe_container").data("marginLeft-origin"),10));break;case"iframe_v3_init":rt(i.V3_initialWidth,i.V3_initialHeight);break;case"iframe_v3_hoverin":rt(i.V3_HoverInWidth,i.V3_HoverInHeight);break;case"expandV3":c(!0);rt(i.V3_ExpandWidth,n("#iframe_container").height());break;case"collapseV3":c(!1);typeof n("#iframe_container").data("marginLeft-origin")!="undefined"&&(u("back widget to initial place: "+n("#iframe_container").data("marginLeft-origin"),r.DEBUG),n("#iframe_container").stop(!0,!1).css("margin-left",parseInt(n("#iframe_container").data("marginLeft-origin"),10)));typeof n("#iframe_container").data("marginRight-origin")!="undefined"&&(u("back widget to initial place: "+n("#iframe_container").data("marginRight-origin"),r.DEBUG),n("#iframe_container").stop(!0,!1).css("margin-right",parseInt(n("#iframe_container").data("marginRight-origin"),10)));typeof n("#iframe_container").data("marginTop-origin")!="undefined"&&(u("back widget to initial place: "+n("#iframe_container").data("marginTop-origin"),r.DEBUG),n("#iframe_container").stop(!0,!1).css("margin-top",n("#iframe_container").data("marginTop-origin")));rt(-1,-1,100);n("#sup_focus_trapper").attr("tabindex","");n("#su_w_last_element").attr("tabindex","");break;case"kill":n("#iframe_container").remove();f=null;break;case"showOverlayV3":c(!0);break;case"hideOverlayV3":c(!1)}},onReady:function(){u("parent ready",r.DEBUG);n('iframe[name*="easyXDM"]').attr("width","100%");n('iframe[name*="easyXDM"]').attr("height","100%")}})}}function at(t){var i=t.event;n.isFunction(SphereUp.SphereUpWidget.events[i])&&SphereUp.SphereUpWidget.events[i](t)}function vt(){var t=Math.max(document.body.scrollWidth,n(window).width()),i=Math.max(document.body.scrollHeight,n(window).height());n("#su_host_overlay").width(t).height(i)}function ri(){var i,e;if(t.IsIE8)return 2147483640;var r=document.querySelectorAll("*")||oXmlDom.documentElement.selectNodes("*"),n,u,o=r.length,f=[];for(i=0;i<o;i+=1)n=r[i].style.zIndex,u=r[i].style.position,n&&u!="static"?f.push(parseInt(n,10)):(e=window.getComputedStyle(r[i],null),n=e.getPropertyValue("z-index"),u=e.getPropertyValue("position"),n!="auto"&&u!=="static"&&f.push(parseInt(n,10)));return f.length?Math.max.apply(null,f):1}function ui(){u("widget loaded",r.DEBUG);SphereUp.SphereUpWidget.startWidget(t)}function fi(){var i={clientId:t.clientId,step:1};t.Design_Mode||(i.url=location.href);u("Asking for settings",r.DEBUG);n.ajax({url:o+"Settings",data:i,type:"GET",dataType:"jsonp",success:function(i){if(u("settings received ok.",r.DEBUG),i.m_Item1.Error){u("Settings error: "+i.m_Item1.Error,r.ERROR);return}if(t=n.extend({sessionId:i.m_Item2},t,i.m_Item1),typeof nt.IsHidden!="undefined"?t.IsHidden=nt.IsHidden:nt.IsHidden=t.IsHidden,!oi()){u("widget is hidden...",r.WARNING);return}if(t.Error&&t.Error.length>2){u(t.Error,r.ERROR);return}e=t.Version&&t.Version.length>0?t.Version:"2.0";t.CustomInitHtmlCssFile==null||typeof t.CustomInitHtmlCssFile=="undefined"||t.CustomInitHtmlCssFile.length<=0||t.htmlLoading==null||typeof t.htmlLoading=="undefined"?(t.IsCustomHtmlUsed=!1,t.CustomInitHtmlCssFile=null):t.IsCustomHtmlUsed=!0;n("#su_w_s_widget").addClass("su_w_s_ver"+e.substring(0,1));g=!0;t.InitialWidth=Math.min(Math.max(t.InitialWidth,204),300);t.PlaceHolder="";at({event:"loading",site:t.SiteUrl});pt()},error:function(){u("!!!Error GetWidgetSettings",r.ERROR)}})}function ei(n){var t=n.indexOf(".");return t>-1&&(n=n.substr(0,t+1)+n.slice(t).replace(/\./g,"")),parseFloat(n)}function ut(t,i,f){u("loading script:"+t,r.DEBUG);var e=null;if(i!="css"){if(i=="JQuery"){if(window.jQuery!=undefined&&ei(window.jQuery.fn.jquery)==1.91){u("script already loaded: "+t,r.DEBUG);n=window.jQuery;f();return}}else if(i=="EASYXDM"){if(typeof easyXDM!="undefined"){u("script already loaded: "+t,r.DEBUG);f();return}}else if(i=="JSON2"&&typeof JSON!="undefined"){u("script already loaded: "+t,r.DEBUG);f();return}e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src",t)}else{if(u("load css",r.DEBUG),ot()){u("load css - safary",r.DEBUG);et(t,f(),this);return}u("load css - all others",r.DEBUG);e=document.createElement("link");e.setAttribute("rel","stylesheet");e.setAttribute("type","text/css");e.setAttribute("href",t)}e.readyState?(u("load css - script.readyState",r.DEBUG),e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&(e.onload=e.onreadystatechange=null,i=="JQuery"&&(n=$.noConflict(!0)),f())}):(u("load css - script.onload",r.DEBUG),e.onload=function(){i=="JQuery"&&(n=$.noConflict(!0));f()});(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)}function rt(i,f,e){var s,h,v,y,c,o,l,a;try{s=5;i<n(window).width()&&n(window).height()<n(document).height()&&(s+=5);h={};i>0&&f>0?(v=n("#iframe_container").width(),y=n("#iframe_container").height(),i=n("#iframe_container").width(i).width(),f=n("#iframe_container").height(f).height(),n("#iframe_container").width(v),n("#iframe_container").height(y),h={width:i,height:f}):(n("#iframe_container").stop(!0,!0),i=n("#iframe_container").width(),f=n("#iframe_container").height());(typeof e=="undefined"||isNaN(e))&&(e=300);u("width : "+i+" height : "+f+" iframe_container left:"+n("#iframe_container").position().left+" marginLeft="+n("#iframe_container").css("marginLeft")+" marginRight="+n("#iframe_container").css("marginRight"),r.DEBUG);n(window).width()>0&&(c=0,o=NaN,c=parseInt(n("#iframe_container").css("marginRight").replace("px"),10),c==0||isNaN(c)?(o=n("#iframe_container").offset().left,n(window).width()<o+i+s?n.extend(h,{marginLeft:"-="+(o+i+s-n(window).width())}):o<s&&n.extend(h,{marginLeft:"+="+(s-o)})):(t.container=="body"?o=n(window).width()-(n(window).width()/2+c+i):t.IsIE7||(o=n("#iframe_container").offset().left,o=o==0||isNaN(o)?NaN:o-(i-n("#iframe_container").width())),isNaN(o)||(n(window).width()<o+i+s?n.extend(h,{marginRight:"+="+(o+i+s-n(window).width())}):o<s&&n.extend(h,{marginRight:"-="+(s-o)}))));l=n("#iframe_container").offset().top-n(window).scrollTop();n(window).height()<f+l+s/2&&(a=n(window).height()-f-s/2-l,a+l<s/2&&(a=s/2-l),n.extend(h,{marginTop:"+="+a}));n("#iframe_container").stop(!0,!1).animate(h,e,function(){typeof n("#iframe_container").data("marginLeft-origin")=="undefined"&&n("#iframe_container").data("marginLeft-origin",n("#iframe_container").css("margin-left").replace("px",""));typeof n("#iframe_container").data("marginRight-origin")=="undefined"&&n("#iframe_container").data("marginRight-origin",n("#iframe_container").css("margin-right").replace("px",""));typeof n("#iframe_container").data("marginTop-origin")=="undefined"&&n("#iframe_container").data("marginTop-origin",n("#iframe_container").css("margin-top").replace("px",""));u("Moving finished",r.DEBUG)})}catch(p){u("Moving failed - "+p,r.DEBUG)}}function oi(){var n=b("showsphereup");return n=="1"?!0:nt.Design_Mode?!0:t.IsHidden?!1:nt.IsHidden!=undefined&&nt.IsHidden==!0&&(n==null||n!=1)&&!si()?!1:!0}function si(){return typeof informContainer!="undefined"?!0:!1}if(nt!=null||typeof nt!="undefined"){if(s&&(n==null||typeof n=="undefined"||n("#iframe_container").length==0)){SphereUp.SphereUpWidget.unloadWidget(function(){SphereUp.SphereUpWidget.loadWidget(nt)});return}if(SphereUp.SphereUpWidget.unloadWidget(),s=!0,SphereUp.SphereUpWidget.defaultOptions.WidgetStartLoadTime=(new Date).getTime(),b("hideSphereup")=="1"){s=!1;return}s=!0;ht();ut(o+"content/su_w_s_loading.css","css",function(){u("css loaded",r.DEBUG)});nt.Design_Mode||ut(o+"/common-scripts/easyXDM.min.js","EASYXDM",function(){l++;lt()});ut(o+"/common-scripts/json2.min.js","JSON2",function(){ut("https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js","JQuery",function(){ut(o+"/common-scripts/jquery.tap.min.js","JQueryTap",function(){initTapPlugin(document,n);yt()})})})}}})();